subprojects {
    apply plugin: "java"

    group = "dev.tigr"
    version = project.meshVersion
    archivesBaseName = project.name

    repositories {
        mavenCentral()
        maven {
            name = "tigr.dev"
            url = "https://maven.tigr.dev"
        }
        maven {
            name = "Minecraft"
            url = "https://libraries.minecraft.net"
        }
        maven {
            name = "SpongePowered"
            url = "https://repo.spongepowered.org/repository/maven-public/"
        }
        maven {
            name = "Fabric"
            url = "https://maven.fabricmc.net/"
        }
        maven {
            name = "jitpack.io"
            url = "https://jitpack.io"
        }
    }

    dependencies {
        implementation "dev.tigr:simpleevents:1.2"
        implementation "org.reflections:reflections:0.10.2"
    }

    // copy artifacts to root build folder after build
    tasks.getByName("build").doLast {
        if(project.name == "mesh-core" || project.name == "example") {
            copy {
                from "${project.rootProject.rootDir}/${project.name}/build/libs/${project.name}-${project.meshVersion}.jar"
                into "${project.rootProject.rootDir}/build"
            }
        } else {
            copy {
                from "${project.rootProject.rootDir}/${project.name}/build/libs/${project.name}-${project.meshVersion}-all.jar"
                into "${project.rootProject.rootDir}/build"
            }
        }
    }
}
